<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Kotlin: Emerging Patterns with Context Parameters - Kirill Rakhman</title><meta name="gridsome:hash" content="6a942ed5c048ddade2bf5e137405aa177d377427"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1"><meta data-vue-tag="ssr" name="google-site-verification" content="iUq6VtnS5zRh-s4b27kdrA1sx9a1YdgEr35fwUd4lGg"><meta data-vue-tag="ssr" data-key="description" name="description" content="Early patterns with Kotlin 2.2’s new context parameters. Key takeaways include bridge methods for member extensions, the holder pattern, and deprecated overloads for gradual migration."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.4a56f7a3661904998f7ebc492669c703.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.4a56f7a3661904998f7ebc492669c703.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.4a56f7a3661904998f7ebc492669c703.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.4a56f7a3661904998f7ebc492669c703.png"><link data-vue-tag="ssr" rel="alternate" type="application/rss+xml" title="RSS Feed for Kirill Rakhman&#x27;s Dev Blog" href="/rss.xml"><link rel="preload" href="/assets/css/0.styles.44ee10b9.css" as="style"><link rel="preload" href="/assets/js/app.55ecf81a.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.85c2b142.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.63edb07b.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.8a09a9a4.js"><link rel="prefetch" href="/assets/js/page--src--pages--cv-vue.f907f9c6.js"><link rel="prefetch" href="/assets/js/page--src--pages--gh-vue.e8449588.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.6d801ee0.js"><link rel="prefetch" href="/assets/js/page--src--pages--linkedin-vue.5d0ccbe0.js"><link rel="prefetch" href="/assets/js/page--src--pages--publications-vue.5926a3d2.js"><link rel="prefetch" href="/assets/js/page--src--pages--recipe-plan--privacy-policy-vue.672110f1.js"><link rel="prefetch" href="/assets/js/page--src--pages--so-vue.963d6a92.js"><link rel="prefetch" href="/assets/js/page--src--pages--talks-vue.90e74cf1.js"><link rel="prefetch" href="/assets/js/page--src--pages--twitter-vue.47130daf.js"><link rel="prefetch" href="/assets/js/page--src--pages--xing-vue.0ce994e5.js"><link rel="stylesheet" href="/assets/css/0.styles.44ee10b9.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body class="has-navbar-fixed-top" data-vue-tag="%7B%22class%22:%7B%22ssr%22:%22has-navbar-fixed-top%22%7D%7D">
    <div data-server-rendered="true" id="app" class="container" data-v-979f03f6 data-v-3c6fa87e><nav role="navigation" aria-label="main navigation" class="navbar is-fixed-top is-primary" data-v-979f03f6><div class="navbar-container container" data-v-979f03f6><div class="navbar-brand" data-v-979f03f6><a href="/" class="navbar-item" data-v-979f03f6><strong data-v-979f03f6>Kirill Rakhman</strong></a><a role="button" aria-label="menu" aria-expanded="false" class="navbar-burger burger" data-v-979f03f6><span aria-hidden="true" data-v-979f03f6></span><span aria-hidden="true" data-v-979f03f6></span><span aria-hidden="true" data-v-979f03f6></span></a></div><div class="navbar-menu" data-v-979f03f6><div class="navbar-start" data-v-979f03f6><a href="/cv/" class="navbar-item" data-v-979f03f6>CV</a><a href="/publications/" class="navbar-item" data-v-979f03f6>Publications</a><a href="/talks/" class="navbar-item" data-v-979f03f6>Talks</a><a href="/blog/" class="navbar-item is-active" data-v-979f03f6>Blog</a></div></div></div></nav><div class="container main-content" data-v-979f03f6><a href="/blog" class="is-active" data-v-3c6fa87e><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-left" data-v-3c6fa87e><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" data-v-3c6fa87e></path></svg>
        All Blog Posts
    </a><div class="post-title mb-2" data-v-979f03f6 data-v-3c6fa87e><h1 class="title" data-v-979f03f6 data-v-3c6fa87e>Kotlin: Emerging Patterns with Context Parameters</h1><p class="subtitle" data-v-979f03f6 data-v-3c6fa87e>
            29 August 2025
        </p></div><div class="content" data-v-979f03f6 data-v-3c6fa87e><p><a href="https://github.com/Kotlin/KEEP/blob/context-parameters/proposals/context-parameters.md" target="_blank" rel="nofollow noopener noreferrer">Context parameters</a> are a new
preview feature in Kotlin 2.2 and supersede the experimental context receivers. In the Kotlin compiler codebase, we've
been using this new language feature for a short while, and here I'm sharing some patterns that have emerged so far.</p>
<h2 id="bridge-methods"><a href="#bridge-methods" aria-hidden="true"><span class="hashtag"></span></a>Bridge Methods</h2>
<p>An important difference between context receivers and context parameters is that context parameters don't act as
implicit receivers.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Foo <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span> <span class="token comment">// context receivers syntax</span>
<span class="token keyword">fun</span> <span class="token function">testContextReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// works</span>
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> Foo<span class="token punctuation">)</span> <span class="token comment">// context parameters syntax</span>
<span class="token keyword">fun</span> <span class="token function">testContextParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// `bar()` would be unresolved, we need to use an explicit receiver</span>
<span class="token punctuation">}</span></code></pre>
<p>This isn't a big deal when we want to call instance methods on the context parameter — we just need to use its name as
an explicit receiver of the call.</p>
<p>However, a problem arises with member extensions (extension functions or properties defined inside an interface or
class).</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Foo

<span class="token keyword">class</span> Bar <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>Bar<span class="token punctuation">)</span> <span class="token comment">// context receivers syntax</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">testContextReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// works</span>
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token comment">// context parameters syntax</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">testContextParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">with</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// we need to introduce an implicit receiver of type `Bar` into the scope</span>
        <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Introducing an implicit receiver using <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/with.html" target="_blank" rel="nofollow noopener noreferrer"><code>with</code></a>
at every call-site adds boilerplate we'd like to avoid.</p>
<p>One approach is to convert the member extension <code>baz</code> into a contextual top-level extension function.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">testContextParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// works</span>
<span class="token punctuation">}</span></code></pre>
<p>However, this only works when the method doesn't need to be overridden — a common use case for us. In this case, we can
duplicate the method as a top-level extension (the so-called <strong>bridge method</strong>) and delegate the implementation to the
interface.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> Bar <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> BarImpl1 <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> BarImpl2 <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">// delegates to the member extension</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">testContextParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// works</span>
<span class="token punctuation">}</span></code></pre>
<p>We've traded some boilerplate at the call-site for boilerplate at the declaration-site. In practice, it's still
worth it because the number of call-sites is typically larger.</p>
<p>The manual work of writing bridge methods looks like a good candidate for automation, e.g., using the IDE or a compiler
plugin.</p>
<h2 id="holder-pattern"><a href="#holder-pattern" aria-hidden="true"><span class="hashtag"></span></a>Holder Pattern</h2>
<p>The value we'd like to pass around as a context argument needs to come from somewhere. Everything just works
when it's passed as a context parameter or extension receiver. In that case, the compiler will pick it up and
use it as a context argument for other calls.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> Foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// works</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> Bar<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> Foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// also works</span>
<span class="token punctuation">}</span></code></pre>
<p>But sometimes we're working with a class where the value is stored in a property. To make the value available as
potential context argument, we need to bring it into scope, e.g., using the new <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/context.html" target="_blank" rel="nofollow noopener noreferrer"><code>context</code></a> function.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">val</span> bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> Foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>To get rid of this boilerplate, we can introduce a <strong>holder</strong> interface for our contextual type <code>Bar</code> that our classes
(typically more than one) can implement.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> BarHolder <span class="token punctuation">{</span>
    <span class="token keyword">val</span> bar<span class="token operator">:</span> Bar
<span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>holder<span class="token operator">:</span> BarHolder<span class="token punctuation">)</span>
<span class="token keyword">fun</span> Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    holder<span class="token punctuation">.</span>bar <span class="token comment">// we can retrieve `Bar` from `holder`</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">override</span> <span class="token keyword">val</span> bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token operator">:</span> BarHolder <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>foo<span class="token operator">:</span> Foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// the dispatch receiver `C` is a subtype of `BarHolder`,</span>
        <span class="token comment">// and is used as a context argument</span>
        foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>This is really more of a workaround than a pattern, and the team is actively thinking about how to better accommodate
this use case. Follow <a href="https://youtrack.jetbrains.com/issue/KT-79236/Class-properties-that-contribute-context-arguments-to-the-class-scope" target="_blank" rel="nofollow noopener noreferrer">KT-79236</a> for more updates. </p>
<h2 id="deprecated-overloads-for-gradual-migration"><a href="#deprecated-overloads-for-gradual-migration" aria-hidden="true"><span class="hashtag"></span></a>Deprecated Overloads for Gradual Migration</h2>
<p>Sometimes, we want to convert a parameter into a context parameter. We can use the <strong>Change Signature</strong> refactoring in
IntelliJ IDEA (support is available starting from 2025.2 though in 2025.3 it will be more mature), and it will migrate
all call-sites.</p>
<p>But sometimes we can't or don't want to migrate all call-sites immediately. In that case, we can introduce an overload
and let callers migrate gradually.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// delegate to non-contextual overload</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// bar is available as a context argument</span>
    <span class="token comment">// can be replaced with `foo()`</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>To detect call-sites that already have the required context argument in scope, we can introduce a third overload
that takes both a context parameter and a regular parameter and mark it as deprecated.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// delegate to non-contextual overload</span>

<span class="token annotation builtin">@Deprecated</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"use parameterless overload"</span></span><span class="token punctuation">,</span> replaceWith <span class="token operator">=</span> <span class="token function">ReplaceWith</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"foo()"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">context</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar <span class="token operator">=</span> x<span class="token punctuation">)</span>

<span class="token function">context</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// Deprecation warning: use parameterless overload</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// resolves to non-contextual overload, no deprecation warning.</span>
<span class="token punctuation">}</span></code></pre>
<p>Using IntelliJ IDEA, we can migrate all callers of the deprecated method inside our project to the parameterless
overload.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 730 246' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-df6a709b1f3de51be24268bb58d343ab'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-df6a709b1f3de51be24268bb58d343ab)' width='730' height='246' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAWCAYAAABwvpo0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAGyElEQVRYw91YaXPjxhHV/6/Kj3Cl/MFx%2bcjGTlK2Yzt72WspEiVKvHDfAAECBEACIADi5c1wpTCrOFmvtaUkqOqawRw9Mz19vJ6TOBhjnRooMlNSlsyRRBMsQw9hEEBRFJiWDU1VsVgoCKMQWbZGXMYwViaCIkKQ%2b9ASHSrpyr%2bBEmtw1y4WywWM1MK6LjkmgJ4Y0FYWTLZNoxmcLMCw38M2dEwmM5imDk3TML65ga7NYBguqrrGMoowvhrLPlVZsM/AbD7jnBuYhoXVKmFpQNd17tWCwdLgv23biJYxik2BsTHGj9NXuLbGUJca/NBHti5wUuUWqk2Atlmh3oSyLihLV9hWFdbrjAukchOe76MoS9TcVNPWsDOXh1vLw/kkj2SsbIQUSlatEbH085BjCsSbhP8hVmx3156cm3NjbdtitVzy8BaCwIfneoeN8wKSOJVrFUUByzDhui77bfh%2bCMdxWPrcV4yyLKQQluSTZhniOOb/iheVodxs0HGNdJNiZk%2bheAqSIuH5MuRFiRPF7jBebDAzG8yVGJObKSZzFU3dYDGd4ZKSj7jI/%2bt3UpQ9kqyGE1SU2pZS95HnGfq%2bR1nkUhMqaoK4qa7r0DSNvBWpBazvdjvU1Ia279BTnft9j6arZdue/4IELzG/5XzBo6oratcW2%2b1W9g/DgF1L3rKfY/u95CXaxVwxR8zf7we2Hdrfhfb/Yu7JTK8Qphs8Hbk4HeuwtW%2bRLq8Q2j/SH8zoFxRE7jXiJME6z2lfGqazGabTKdXWpLoltLEci0ih/U9wHdzgzL2El0SIgpC2FiDyfDx//hyaTh%2bTpgjDkPas0mYNKcicqqqGMU41ExPVxczrsMwpkB4IqO6nP51yXRVV08lbu938cf1d6YQCRtcPvJGeN73Drtmg73ZodxWl31HqvfzvXt%2beuJH%2b6GZFCe5F3HzH8YL2gvl%2beD22v7vJ29u8rd9qiKC2E/P3h3V6sTlIkut0r8cfHfrBTOAhmAwY3pOF3uf7kIeXAghTwPS3cKIarpfCsS3p7YV9B54Hix5ZhD38SlV7N7qv4g%2buAZ5yDsMpYAc7hphU2ppB2941Ozgs54sF7X/1sxv6X6cT78VvUG4LGHRyBh2UH0ao6J2z9frfqOWbhLdsG37B/OFnzeBBTcBPgGLb0mtvEOU1/IAgZp0TUKzpwIQTOjjJ/qjcS6eHo/pw13ZbirH3x90vDzTcrXVcHvM9rC2c6cPSiVBrO8rx5fMZXp4vEBF9WY6PcJni/HyMV6eX0K0Qy6RARLKcCIruwHIj2C4RnBPCsCNZxgynukm/wXbbi1l3EQlsIdotX84X48RclTxU0z/w4VjbW8INVsQk27s2j/%2b6RX6sl9WATb1H%2bcAkw2BWEgj5K%2bKBFpuGoGTXEpgQCG0qQt8KG4bHpmWoosSqpmXIJBhiTK5ZL7c1%2bxtZVnXL8QQ4HF/VO2pSKeeKermpZfuBX0PswHLbyDZBoi7mN7tejj/w79h%2b4Nt2w3uhk30n4nR/MIj0KfrViLefSfxdEPhsiaWbhmCFOUFK/LzdlMwP2L7dECkWD2aLEk/8wpD4YDig61r5UwWvUMVTjMcToq8zXJxfMBe4gsuweD0aMUubEyanuGT/nJmh7we/LsoP/3B0Xd8/ThQ4SL9ltgZ4yg%2bwNB5%2bVmC0yHA%2bW2GkrDG1a4y1DS6VHBfzDBOrxgX7L9n36jrGpZrjxYWNs0kix4zma1xpJU6vlzi7iclD8FvLuX%2bbphwXQ/H3UIMBE7tFtIZEnO8jzr%2bVBgwUgJ8Dk4tnuLoc4cMn5/jw81N89Icz/O5PI3zzg4VPv7rGbz99iQ8%2beYk/PjPw5PsFnl2E%2bOSrCb54quKDj7/HR1%2bO8O1PAb5%2bYeKLv6r47OspPvvzFT7/ZoInf5njyXdTyff33zHLNHqMrQGnC%2bKN5JEFIDE6Y025oxl0963utuyHA91a65ulHEOiv8RO5BgifHH8jjxFHiPaBIn%2beicc6l6ScEZ9/4gCEPYnYR6P2rcNDEPHbDLFchlJZKirinyMiERmx0wuCjxoigrPsuXLi%2b%2b7/FfkPItQWqTIMkMYRKK0v%2bN9gJKv294APY8ugNtFRTbmug50TZcvJpZpwDLEU5MjX1jES4t4rXEcD6Hry9TYtEzYFIbjuARSASNEfZSq4j/SrRb%2bVwhAPDwE9PoBD%2bIHPmzbke8ASRLL25eH9MTTlUNBefBJAjX6niv7RKg8PsTbeOLHFcDwz4sLDXCYAQoNcIQm6AYS3rrrOFIwk5sJTMOU6q6qGlVfk48lwgRE4uRROG8%2bWrxNKHwsAfwdr2lRKd1AiTgAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="730" alt="IntelliJ IDEA suggests replacing calls to the deprecated method in the whole project" data-srcset="/assets/static/replace-deprecated.df92f3f.249e4f784dd1b0fc0dd8ab4ae8cafcb7.png 730w" data-sizes="(max-width: 730px) 100vw, 730px" data-src="/assets/static/replace-deprecated.df92f3f.249e4f784dd1b0fc0dd8ab4ae8cafcb7.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/replace-deprecated.df92f3f.249e4f784dd1b0fc0dd8ab4ae8cafcb7.png" width="730" alt="IntelliJ IDEA suggests replacing calls to the deprecated method in the whole project"></noscript></p>
<h2 id="force-resolution-to-non-contextual-overload"><a href="#force-resolution-to-non-contextual-overload" aria-hidden="true"><span class="hashtag"></span></a>Force Resolution to Non-Contextual Overload</h2>
<p>When the compiler resolves a call and has the choice between a contextual and non-contextual overload, it will
prioritize the contextual one. This can be demonstrated by modifying the previous example.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// both overloads are applicable, prioritizing the contextual one</span>
    <span class="token comment">// oops, infinite recursion</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>We can force the compiler to resolve to the non-contextual overload by using different parameter names (as in the
example above) and using the named argument syntax.</p>
<pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">context</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Bar<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// only one overload is applicable, no recursion</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>bar <span class="token operator">=</span> x<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="closing"><a href="#closing" aria-hidden="true"><span class="hashtag"></span></a>Closing</h2>
<p>Part of the reason why context parameters are released in preview is to collect problems like the ones highlighted in
this post. This way, the team can make adjustments and implement improvements before releasing them as stable.</p>
<p>Let us know in the <a href="https://github.com/Kotlin/KEEP/issues/367" target="_blank" rel="nofollow noopener noreferrer">KEEP discussion</a> if you discovered any more problems or
share your favorite patterns in the Bluesky thread.</p>
</div><hr class="mb-3" data-v-979f03f6 data-v-3c6fa87e><!----><div class="discuss mb-3" data-v-979f03f6 data-v-3c6fa87e><h2 class="is-size-4" data-v-979f03f6 data-v-3c6fa87e><a href="https://bsky.app/profile/rakhman.info/post/3lxjtksiujk2q" rel="noopener" target="_blank" data-v-979f03f6 data-v-3c6fa87e><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-bluesky" data-v-979f03f6 data-v-3c6fa87e><path fill="currentColor" d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z" data-v-979f03f6 data-v-3c6fa87e></path></svg>
            Discuss on Bluesky
        </a></h2></div><a href="/blog" class="is-active" data-v-3c6fa87e><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-left" data-v-3c6fa87e><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" data-v-3c6fa87e></path></svg>
        All Blog Posts
    </a></div></div>
    <script src="/assets/js/app.55ecf81a.js" defer></script><script src="/assets/js/page--src--templates--post-vue.85c2b142.js" defer></script>
  </body>
</html>
